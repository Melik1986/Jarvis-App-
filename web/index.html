<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>JSRVIS</title>
    <style id="expo-reset">
      html, body { height: 100%; }
      body { overflow: hidden; margin: 0; }
      #root { display: flex; height: 100%; flex: 1; }
    </style>
    <style>
      .rating-section {
        border: 1px solid var(--border);
        border-radius: var(--radius-lg);
        background: linear-gradient(180deg, rgba(19, 26, 45, 0.94), rgba(11, 17, 30, 0.95));
        padding: 26px;
        box-shadow: 0 10px 36px rgba(0, 0, 0, 0.24);
        text-align: center;
      }
      .rating-stars {
        display: inline-flex;
        flex-direction: row-reverse;
        justify-content: center;
        margin-bottom: 10px;
      }
      .rating-stars input { display: none; }
      .rating-stars label {
        font-size: 32px;
        color: #444;
        cursor: pointer;
        transition: color 0.2s;
        padding: 0 5px;
      }
      .rating-stars input:checked ~ label,
      .rating-stars:not(:checked) > label:hover,
      .rating-stars:not(:checked) > label:hover ~ label { color: var(--primary); }
      .rating-stars input:checked + label:hover,
      .rating-stars input:checked ~ label:hover,
      .rating-stars label:hover ~ input:checked ~ label,
      .rating-stars input:checked ~ label:hover ~ label { color: var(--primary-strong); }
      .rating-feedback {
        font-size: 14px;
        color: var(--text-muted);
        min-height: 20px;
      }
      .rating-summary {
        font-size: 14px;
        color: var(--text-secondary);
      }
    </style>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    <p class="footer">
      Built on <a href="https://replit.com" target="_blank">Replit</a> |
      Powered by
      <a href="https://expo.dev" target="_blank">Expo</a>
    </p>
    <section class="card rating-section">
      <h2>Rate Our App</h2>
      <div class="rating-stars">
        <input type="radio" id="star5" name="rating" value="5" /><label for="star5" title="5 stars">★</label>
        <input type="radio" id="star4" name="rating" value="4" /><label for="star4" title="4 stars">★</label>
        <input type="radio" id="star3" name="rating" value="3" /><label for="star3" title="3 stars">★</label>
        <input type="radio" id="star2" name="rating" value="2" /><label for="star2" title="2 stars">★</label>
        <input type="radio" id="star1" name="rating" value="1" /><label for="star1" title="1 star">★</label>
      </div>
      <p class="rating-feedback">Select a rating</p>
      <p class="rating-summary"><span class="rating-avg">0.0</span> • <span class="rating-count">0</span></p>
    </section>
    <script type="module" src="/client/index.bundle?platform=web&dev=true&hot=false&lazy=true&transform.engine=hermes&transform.routerRoot=app&transform.reactCompiler=true&unstable_transformProfile=hermes-stable"></script>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const APP_ID = 'axon-flow-ai';
        const ratings = JSON.parse(localStorage.getItem(`${APP_ID}-ratings`)) || [];
        const hasVoted = localStorage.getItem(`${APP_ID}-hasVoted`);

        const ratingStars = [...document.querySelectorAll('.rating-stars input')];
        const ratingFeedback = document.querySelector('.rating-feedback');
        const ratingSummary = document.querySelector('.rating-summary');
        const feedbackMessages = [
          'Terrible', 'Bad', 'Average', 'Good', 'Excellent!'
        ];

        function updateRatingSummary() {
          const avgEl = document.querySelector('.rating-summary .rating-avg');
          const countEl = document.querySelector('.rating-summary .rating-count');
          const count = ratings.length;
          const average = count ? (ratings.reduce((acc, rating) => acc + rating, 0) / count).toFixed(1) : '0.0';
          if (avgEl) avgEl.textContent = average;
          if (countEl) countEl.textContent = String(count);
        }

        function handleRating(e) {
          const rating = parseInt(e.target.value);
          if (hasVoted) {
            ratingFeedback.textContent = 'You have already voted.';
            return;
          }
          ratings.push(rating);
          localStorage.setItem(`${APP_ID}-ratings`, JSON.stringify(ratings));
          localStorage.setItem(`${APP_ID}-hasVoted`, 'true');
          updateRatingSummary();
          ratingFeedback.textContent = `Thanks for your ${feedbackMessages[rating - 1]} rating!`;
        }

        ratingStars.forEach(star => {
          star.addEventListener('change', handleRating);
        });

        updateRatingSummary();
       });
     </script>
     <script>
       function downloadAPK() {
         const apkUrl = '/axon-app.apk';
         const link = document.createElement('a');
         link.href = apkUrl;
         link.download = 'axon-app.apk';
         document.body.appendChild(link);
         link.click();
         document.body.removeChild(link);
       }
     </script>
  </body>
</html>
